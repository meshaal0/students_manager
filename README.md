# نظام إدارة الطلاب

هذا المشروع هو نظام شامل لإدارة الطلاب مبني باستخدام Django. يساعد المؤسسات التعليمية على إدارة معلومات الطلاب، تتبع الحضور والمدفوعات، وإرسال إشعارات WhatsApp آلية للأحداث الهامة.

## الميزات الرئيسية

*   **إدارة معلومات الطلاب:** تخزين وإدارة تفاصيل الطلاب بشكل شامل.
*   **تتبع الحضور:** تسجيل ومراقبة حضور الطلاب. قد يدعم النظام مسح الباركود لتسجيل الحضور بسرعة (تحقق بناءً على استخدام `python-barcode` إذا أمكن).
*   **معالجة المدفوعات:** تتبع رسوم الطلاب، المدفوعات، وتواريخ الاستحقاق.
*   **إشعارات WhatsApp الآلية:** إرسال رسائل آلية للحضور، تذكيرات الدفع، والإعلانات الهامة الأخرى.
*   **التقارير والتحليلات:** إنشاء تقارير وعرض رؤى تاريخية حول بيانات الطلاب، الحضور، والماليات (بناءً على `students/templates/students/historical_insights.html`).
*   **استيراد/تصدير البيانات:** سهولة استيراد وتصدير بيانات الطلاب بتنسيقات مختلفة (باستخدام `django-import-export`).

## المتطلبات الأساسية

قبل البدء، تأكد من تثبيت المتطلبات التالية:

*   Python (يوصى بالإصدار 3.x - تحقق من الإصدار المحدد إذا كان مدرجًا في المشروع، وإلا افترض أحدث إصدار 3.x)
*   Pip (مثبت حزم Python)
*   Redis (لقائمة مهام Celery ووسيط الرسائل)
*   يوصى بشدة باستخدام مدير بيئة افتراضية (مثل `venv`، `virtualenv`).

## التثبيت والإعداد

1.  **استنسخ المستودع:**
    ```bash
    git clone <repository_url>
    cd student_manager
    ```
    *(استبدل `<repository_url>` بالرابط الفعلي للمستودع)*

2.  **أنشئ وشغل بيئة افتراضية:**
    ```bash
    python -m venv venv
    # على نظام ويندوز
    venv\Scripts\activate
    # على نظامي macOS/Linux
    source venv/bin/activate
    ```

3.  **ثبت الاعتماديات:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **إعداد Redis:**
    تأكد من أن خادم Redis يعمل. تم تكوين المشروع للاتصال بـ `redis://localhost:6379/0` بشكل افتراضي (راجع `student_manager/settings.py`).

5.  **قم بتشغيل ترحيل قاعدة البيانات:**
    ```bash
    python manage.py migrate
    ```

6.  **أنشئ حساب مستخدم خارق (superuser):**
    سيتم استخدام هذا الحساب للوصول إلى لوحة تحكم Django.
    ```bash
    python manage.py createsuperuser
    ```
    اتبع التعليمات لإعداد اسم مستخدم وبريد إلكتروني وكلمة مرور.

7.  **إعداد أتمتة WhatsApp (هام):**
    يستخدم هذا المشروع Selenium و PyAutoGUI لأتمتة WhatsApp.
    *   **ChromeDriver:** تأكد من وجود `chromedriver.exe` (أو WebDriver المناسب لمتصفحك ونظام التشغيل) في `students/utils/` أو في PATH الخاص بنظامك. يتضمن ملف `requirements.txt` الحالي `webdriver-manager` الذي يمكن أن يساعد في إدارة ذلك.
    *   **جلسة WhatsApp الأولية:** قد تحتاج إلى تشغيل برنامج نصي للإعداد الأولي أو تسجيل الدخول يدويًا إلى WhatsApp Web من خلال الأتمتة لإنشاء جلسة. تحقق من `students/utils/init_whatsapp_session.py` أو البرامج النصية المشابهة للحصول على إرشادات محددة إذا كانت متوفرة. يقوم النظام بتخزين معلومات الجلسة في `students/utils/whatsapp_profile/`.
    *   **ملاحظة:** يمكن أن تكون أتمتة WhatsApp Web هشة وقد تتطلب تحديثات إذا غير WhatsApp واجهة الويب الخاصة به.

## تشغيل التطبيق

1.  **ابدأ عامل Celery:**
    افتح نافذة طرفية جديدة، انتقل إلى دليل المشروع، وقم بتنشيط البيئة الافتراضية. ثم قم بتشغيل:
    ```bash
    celery -A student_manager worker -l info
    ```
    يبدأ هذا الأمر عملية عامل Celery التي تتعامل مع المهام الخلفية مثل إرسال رسائل WhatsApp. يشير الخيار `-A student_manager` إلى مثيل تطبيق Celery المحدد في `student_manager/celery.py`.

2.  **ابدأ خادم تطوير Django:**
    في نافذة طرفية أخرى، انتقل إلى دليل المشروع وقم بتنشيط البيئة الافتراضية. ثم قم بتشغيل:
    ```bash
    python manage.py runserver
    ```

3.  **الوصول إلى التطبيق:**
    افتح متصفح الويب الخاص بك وانتقل إلى `http://127.0.0.1:8000/`.

4.  **الوصول إلى لوحة تحكم Django:**
    لإدارة بيانات التطبيق مباشرة، بما في ذلك سجلات الطلاب والمدفوعات وما إلى ذلك، انتقل إلى `http://127.0.0.1:8000/admin/` وقم بتسجيل الدخول باستخدام بيانات اعتماد المستخدم الخارق التي تم إنشاؤها أثناء الإعداد.

## نظرة عامة على الاستخدام

*   **لوحة التحكم (Admin Panel):** الواجهة الأساسية لإدارة النظام هي من خلال لوحة تحكم Django (`/admin/`). هنا يمكنك:
    *   إضافة وتحديث وحذف سجلات الطلاب.
    *   إدارة الحضور.
    *   تسجيل وتتبع المدفوعات.
    *   تكوين فئات الإشعارات.
    *   عرض سجلات النظام والبيانات الأساسية.
*   **بوابة الطالب/العروض:** يتضمن التطبيق عروضًا لـ:
    *   الصفحة الرئيسية/لوحة المعلومات (من المحتمل `home.html`)
    *   عرض الحضور (`attendance.html`)
    *   بث الرسائل (`broadcast_message.html`)
    *   تتبع الدخل (`income.html`)
    *   لوحة معلومات يومية ورؤى تاريخية للطلاب (`students/daily_dashboard.html`, `students/historical_insights.html`).
*   **إشعارات WhatsApp:** يتم تشغيل هذه الإشعارات بشكل عام تلقائيًا بواسطة أحداث النظام (مثل تسجيل الحضور، تواريخ استحقاق الدفع) وتتم معالجتها بواسطة عامل Celery. تأكد من صحة إعداد أتمتة WhatsApp وأن عامل Celery قيد التشغيل.

## المساهمة

نرحب بالمساهمات! إذا كنت ترغب في المساهمة في هذا المشروع، يرجى اتباع الخطوات العامة التالية:

1.  قم بعمل Fork للمستودع.
2.  أنشئ فرعًا جديدًا لميزتك أو إصلاح الخطأ (`git checkout -b feature/your-feature-name` أو `bugfix/your-bug-fix`).
3.  قم بإجراء التغييرات الخاصة بك وقم بتنفيذها (commit) برسائل واضحة ووصفية.
4.  ادفع تغييراتك إلى المستودع الذي قمت بعمل Fork له.
5.  أنشئ طلب سحب (Pull Request) إلى الفرع `main` أو `develop` للمستودع الرئيسي.

يرجى التأكد من أن التعليمات البرمجية الخاصة بك تلتزم بأي معايير ترميز موجودة وتتضمن اختبارات ذات صلة إذا أمكن.

## الترخيص

هذا المشروع لا يخضع حاليًا لترخيص محدد. يرجى الاتصال بالمشرفين للحصول على معلومات الترخيص أو التفكير في إضافة ترخيص مفتوح المصدر مثل MIT إذا كان ذلك مناسبًا.
